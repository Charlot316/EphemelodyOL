<template>
  <div class="play-interface select" id="play-interface-container">
    <div v-show="loadingStatus.canRun" class="play-interface">
      <audio
        id="audioSong"
        preload="auto"
        controls
        autoplay
        :src="chart.songUrl"
        style="display:none"
        @canplaythrough="audioLoaded"
      />
      <div v-for="image in imagePath" :key="image">
        <img
          :src="image.url"
          v-show="
            global.currentTime >= image.startTime &&
              global.currentTime <= image.endTime
          "
          @load="imageLoaded"
          style="position:absolute;left:0;top:0;width:100%;height:100%;object-fit:fill;user-drag:none;"
        />
      </div>

      <div
        :style="{
          height: '2px',
          position: 'absolute',
          left: '0px',
          top: global.screenHeight * global.finalY - 1 + 'px',
          width: global.screenWidth + 'px',
        }"
      >
        <div
          class="white-line"
          :style="{
            height: '100%',
            position: 'absolute',
            left: (global.screenWidth - whiteLineLength) / 2 + 'px',
            width: whiteLineLength + 'px',
            background: 'rgba(255,255,255,1)',
          }"
        ></div>
      </div>

      <div
        class="play-interface-track-container"
        v-for="Track in chart.tracks"
        :key="Track"
      >
        <Track
          :Track="Track"
          :Global="global"
          @addCount="addCount"
          v-if="
            global.currentTime > Track.startTiming &&
              global.currentTime < Track.endTiming
          "
        />
      </div>

      <el-dialog
        v-model="dialogVisible"
        title="开始"
        width="30%"
        :show-close="false"
        :close-on-press-escape="false"
        :close-on-click-modal="false"
      >
        <span>加载完毕，点按以开始</span>
        <template #footer>
          <span class="dialog-footer">
            <el-button type="primary" @click="startMusic">确认</el-button>
          </span>
        </template>
      </el-dialog>
    </div>
  </div>
</template>

<script>
import Track from "@/components/PlayInterface/Track";
import "animate.css";
export default {
  components: {
    Track,
  },
  data() {
    return {
      num: 0,
      chart: {
        songLength: 0,
      },
      global: {
        screenWidth: 0,
        screenHeight: 0,
        remainingTime: 1000,
        finalY: 0.8,
        currentTime: 0,
        lostTime: 150,
        pureTime: 50,
        farTime: 100,
        isEdit: false,
        keyPressTime: [],
        keyIsHold: [],
        pureCount: 0,
        farCount: 0,
        lostCount: 0,
        combo: 0,
        maxCombo: 0,
      },
      imagePath: [],
      dialogVisible: false,
      audio: null,
      playInterface: null,
      isRunning: false,
      loadingStatus: {
        chart: false,
        audio: false,
        image: false,
        imageCurrentCount: 0,
        canRun: false,
      },
    };
  },
  computed: {
    whiteLineLength() {
      const time = 200;
      const waitLoad = 1000;
      if (
        this.global.currentTime > time + waitLoad &&
        this.global.currentTime < this.chart.songLength - time
      ) {
        return this.global.screenWidth;
      } else {
        if (this.global.currentTime < time + waitLoad) {
          if (this.global.currentTime < waitLoad) {
            return 0;
          } else
            return (
              ((this.global.currentTime - waitLoad) * this.global.screenWidth) /
              time
            );
        } else {
          return (
            ((this.chart.songLength - this.global.currentTime) *
              this.global.screenWidth) /
            time
          );
        }
      }
    },
  },
  created() {
    this.loadingStatus = {
      chart: false,
      audio: false,
      image: false,
      canRun: false,
      imageCurrentCount: 0,
    };
    this.global = {
      screenWidth: 0,
      screenHeight: 0,
      remainingTime: 1000,
      finalY: 0.8,
      currentTime: 0,
      lostTime: 200,
      pureTime: 75,
      farTime: 150,
      isEdit: false,
      keyPressTime: [],
      keyIsHold: [],
      pureCount: 0,
      farCount: 0,
      lostCount: 0,
      combo: 0,
      maxCombo: 0,
    };
  },
  mounted() {
    const that = this;
    this.playInterface = document.getElementById("play-interface-container");
    this.global.screenWidth = this.playInterface.offsetWidth;
    this.global.screenHeight = this.playInterface.offsetHeight;
    window.onresize = () => {
      return (() => {
        that.global.screenWidth = that.playInterface.offsetWidth;
        that.global.screenHeight = that.playInterface.offsetHeight;
      })();
    };

    document.onkeydown = function(e) {
      if (!e.repeat) {
        that.global.keyPressTime[e.key.toUpperCase()] = that.global.currentTime;
        that.global.keyIsHold[e.key.toUpperCase()] = true;
      }
    };
    document.onkeyup = function(e) {
      that.global.keyIsHold[e.key.toUpperCase()] = false;
    };

    this.initiate();
  },

  methods: {
    //获取谱面信息
    getChart() {
      this.chart = {
        songId: 1,
        tracks: [
          {
            id: 0,
            type: 1,
            key: "d",
            startTiming: 2430,
            endTiming: 15118,
            positionX: 0.2,
            width: 0.06,
            R: 180,
            G: 238,
            B: 180,
            notes: [
              {
                noteType: 0,
                key: "d",
                timing: 3530,
              },
              {
                noteType: 0,
                key: "d",
                timing: 4221,
              },
              {
                noteType: 0,
                key: "d",
                timing: 4949,
              },
              {
                noteType: 0,
                key: "d",
                timing: 5650,
              },
              {
                noteType: 0,
                key: "d",
                timing: 6361,
              },
              {
                noteType: 0,
                key: "d",
                timing: 7062,
              },
              {
                noteType: 0,
                key: "d",
                timing: 7755,
              },
              {
                noteType: 0,
                key: "d",
                timing: 8460,
              },
              {
                noteType: 0,
                key: "d",
                timing: 9163,
              },
              {
                noteType: 0,
                key: "d",
                timing: 10228,
              },
              {
                noteType: 0,
                key: "d",
                timing: 10568,
              },
              {
                noteType: 0,
                key: "d",
                timing: 11969,
              },
              {
                noteType: 0,
                key: "d",
                timing: 12144,
              },
              {
                noteType: 0,
                key: "d",
                timing: 12319,
              },
              {
                noteType: 1,
                key: "d",
                timing: 13200,
              },
              {
                noteType: 0,
                key: "d",
                timing: 13728,
              },
              {
                noteType: 0,
                key: "d",
                timing: 14081,
              },
              {
                noteType: 0,
                key: "d",
                timing: 14254,
              },
              {
                noteType: 0,
                key: "d",
                timing: 14428,
              },
              {
                noteType: 0,
                key: "d",
                timing: 14618,
              },
            ],
            moveOperations: [
              {
                trackId: 0,
                type: 1,
                startTime: 14630,
                endTime: 14630,
                endX: -1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.2,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [
              {
                trackId: 0,
                type: 3,
                startTime: 11969,
                endTime: 11969,
                endX: 0,
                endWidth: 0,
                endR: 191,
                endG: 62,
                endB: 255,
                background: "",
                startR: 180,
                startG: 238,
                startB: 180,
              },
              {
                trackId: 0,
                type: 3,
                startTime: 12144,
                endTime: 12144,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 255,
                endB: 255,
                background: "",
                startR: 191,
                startG: 62,
                startB: 255,
              },
              {
                trackId: 0,
                type: 3,
                startTime: 12319,
                endTime: 12319,
                endX: 0,
                endWidth: 0,
                endR: 180,
                endG: 48,
                endB: 38,
                background: "",
                startR: 255,
                startG: 255,
                startB: 255,
              },
            ],
            tempR: 180,
            tempG: 48,
            tempB: 38,
            tempWidth: 0.06,
            tempPositionX: -1,
          },
          {
            id: 3,
            type: 1,
            key: "k",
            startTiming: 2430,
            endTiming: 15118,
            positionX: 0.8,
            width: 0.06,
            R: 180,
            G: 238,
            B: 180,
            notes: [
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9248000000000003,
                noteType: 0,
                key: "k",
                timing: 3530,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9248000000000003,
                noteType: 0,
                key: "k",
                timing: 4949,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9208000000000003,
                noteType: 0,
                key: "k",
                timing: 5300,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9320000000000004,
                noteType: 0,
                key: "k",
                timing: 5475,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9199999999999999,
                noteType: 0,
                key: "k",
                timing: 6705,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "k",
                timing: 7414,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9208000000000007,
                noteType: 0,
                key: "k",
                timing: 8460,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "k",
                timing: 9163,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9255999999999993,
                noteType: 0,
                key: "k",
                timing: 10568,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "k",
                timing: 11624,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9256000000000011,
                noteType: 0,
                key: "k",
                timing: 11969,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "k",
                timing: 12144,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "k",
                timing: 12319,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9248000000000012,
                noteType: 1,
                key: "k",
                timing: 13200,
                endTiming: 13381,
                length: 0.13163636363636363,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9247999999999994,
                noteType: 0,
                key: "k",
                timing: 13728,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "k",
                timing: 14081,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9255999999999993,
                noteType: 0,
                key: "k",
                timing: 14254,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9199999999999999,
                noteType: 0,
                key: "k",
                timing: 14428,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 3,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "k",
                timing: 14618,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 3,
                type: 1,
                startTime: 14630,
                endTime: 14630,
                endX: 2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [
              {
                trackId: 3,
                type: 3,
                startTime: 11969,
                endTime: 11969,
                endX: 0,
                endWidth: 0,
                endR: 191,
                endG: 62,
                endB: 255,
                background: "",
                startR: 180,
                startG: 238,
                startB: 180,
              },
              {
                trackId: 3,
                type: 3,
                startTime: 12144,
                endTime: 12144,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 255,
                endB: 255,
                background: "",
                startR: 191,
                startG: 62,
                startB: 255,
              },
              {
                trackId: 3,
                type: 3,
                startTime: 12319,
                endTime: 12319,
                endX: 0,
                endWidth: 0,
                endR: 180,
                endG: 48,
                endB: 38,
                background: "",
                startR: 255,
                startG: 255,
                startB: 255,
              },
            ],
            tempR: 180,
            tempG: 48,
            tempB: 38,
            tempWidth: 0.06,
            tempPositionX: 2,
          },
          {
            id: 1,
            type: 1,
            key: "f",
            startTiming: 2800,
            endTiming: 14081,
            positionX: 0.4,
            width: 0.06,
            R: 180,
            G: 238,
            B: 180,
            notes: [
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "f",
                timing: 3900,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9199999999999999,
                noteType: 0,
                key: "f",
                timing: 4602,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9208000000000003,
                noteType: 0,
                key: "f",
                timing: 5300,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9264000000000001,
                noteType: 0,
                key: "f",
                timing: 6002,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9199999999999999,
                noteType: 0,
                key: "f",
                timing: 6705,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "f",
                timing: 7414,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9224000000000006,
                noteType: 0,
                key: "f",
                timing: 8105,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9256000000000002,
                noteType: 0,
                key: "f",
                timing: 8808,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9240000000000013,
                noteType: 0,
                key: "f",
                timing: 10053,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9208000000000007,
                noteType: 0,
                key: "f",
                timing: 10930,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9224000000000014,
                noteType: 0,
                key: "f",
                timing: 11448,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 1,
                positionX: 0,
                positionY: 0.9199999999999999,
                noteType: 0,
                key: "f",
                timing: 13536,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 1,
                type: 1,
                startTime: 14081,
                endTime: 14081,
                endX: -1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 180,
            tempG: 238,
            tempB: 180,
            tempWidth: 0.06,
            tempPositionX: 0.4,
          },
          {
            id: 2,
            type: 1,
            key: "j",
            startTiming: 3000,
            endTiming: 14404,
            positionX: 0.6,
            width: 0.06,
            R: 180,
            G: 238,
            B: 180,
            notes: [
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9256000000000002,
                noteType: 0,
                key: "j",
                timing: 4221,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9216000000000002,
                noteType: 0,
                key: "j",
                timing: 5650,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "j",
                timing: 6361,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "j",
                timing: 7062,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9208000000000007,
                noteType: 0,
                key: "j",
                timing: 7755,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9224000000000006,
                noteType: 0,
                key: "j",
                timing: 8105,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9256000000000002,
                noteType: 0,
                key: "j",
                timing: 8808,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "j",
                timing: 9514,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9240000000000013,
                noteType: 0,
                key: "j",
                timing: 10053,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9224000000000014,
                noteType: 0,
                key: "j",
                timing: 11448,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9255999999999993,
                noteType: 0,
                key: "j",
                timing: 12670,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9199999999999999,
                noteType: 0,
                key: "j",
                timing: 13034,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 2,
                positionX: 0,
                positionY: 0.9256000000000011,
                noteType: 0,
                key: "j",
                timing: 13904,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 2,
                type: 1,
                startTime: 14801,
                endTime: 14081,
                endX: 2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 180,
            tempG: 238,
            tempB: 180,
            tempWidth: 0.06,
            tempPositionX: 0.6,
          },
          {
            id: 4,
            type: 0,
            key: "a",
            startTiming: 3530,
            endTiming: 8808,
            positionX: 0.1,
            width: 0.03,
            R: 160,
            G: 160,
            B: 160,
            notes: [],
            moveOperations: [
              {
                trackId: 4,
                type: 1,
                startTime: 3530,
                endTime: 3900,
                endX: 0.9,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.1,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 3900,
                endTime: 4221,
                endX: 0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8956756756756761,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 4221,
                endTime: 4602,
                endX: 0.9,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.10495748084533041,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 4602,
                endTime: 4949,
                endX: 0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8895663711397024,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 4949,
                endTime: 5300,
                endX: 0.9,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.10910162963849679,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 5300,
                endTime: 5650,
                endX: 0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8909869131582724,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 5650,
                endTime: 6002,
                endX: 0.9,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.12259962609023489,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 6002,
                endTime: 6361,
                endX: 0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8933744286314518,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 6361,
                endTime: 6705,
                endX: 0.9,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.11546969637999993,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 6705,
                endTime: 7062,
                endX: 0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.9000000000000004,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 7062,
                endTime: 7414,
                endX: 0.9,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.11568627450980351,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 7414,
                endTime: 7755,
                endX: 0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8999999999999986,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 7755,
                endTime: 8105,
                endX: 0.9,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.10000000000000142,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 8105,
                endTime: 8460,
                endX: 0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8840000000000003,
              },
              {
                trackId: 4,
                type: 1,
                startTime: 8460,
                endTime: 8808,
                endX: 0.9,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.10883380281690336,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.03,
            tempPositionX: 0.9,
          },
          {
            id: 5,
            type: 0,
            key: "a",
            startTiming: 9163,
            endTiming: 10228,
            positionX: 0.1,
            width: 0.03,
            R: 160,
            G: 160,
            B: 160,
            notes: [],
            moveOperations: [
              {
                trackId: 5,
                type: 1,
                startTime: 9163,
                endTime: 9514,
                endX: 0.9,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.1,
              },
              {
                trackId: 5,
                type: 1,
                startTime: 9514,
                endTime: 9879,
                endX: 0.85,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8977207977207939,
              },
              {
                trackId: 5,
                type: 1,
                startTime: 9879,
                endTime: 10053,
                endX: 0.8,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8510459352925107,
              },
              {
                trackId: 5,
                type: 1,
                startTime: 10053,
                endTime: 10228,
                endX: 0.9,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8017602046652592,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.03,
            tempPositionX: 0.9,
          },
          {
            id: 6,
            type: 0,
            key: "a",
            startTiming: 10568,
            endTiming: 11624,
            positionX: 0.9,
            width: 0.03,
            R: 160,
            G: 160,
            B: 160,
            notes: [],
            moveOperations: [
              {
                trackId: 6,
                type: 1,
                startTime: 10568,
                endTime: 10930,
                endX: 0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.9,
              },
              {
                trackId: 6,
                type: 1,
                startTime: 10930,
                endTime: 11272,
                endX: 0.15,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.10662983425414652,
              },
              {
                trackId: 6,
                type: 1,
                startTime: 11272,
                endTime: 11448,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.14936593324932956,
              },
              {
                trackId: 6,
                type: 1,
                startTime: 11448,
                endTime: 11624,
                endX: 0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.19827383863350034,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.03,
            tempPositionX: 0.1,
          },
          {
            id: 7,
            type: 0,
            key: "a",
            startTiming: 13903,
            endTiming: 16506,
            positionX: -1,
            width: 0.1,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 7,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "f",
                timing: 15003,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 7,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "j",
                timing: 15146,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 7,
                positionX: 0,
                positionY: 0.9247999999999994,
                noteType: 0,
                key: "k",
                timing: 15323,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 7,
                positionX: 0,
                positionY: 0.9208000000000016,
                noteType: 0,
                key: "k",
                timing: 15659,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 7,
                positionX: 0,
                positionY: 0.9231999999999996,
                noteType: 0,
                key: "j",
                timing: 15834,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 7,
                positionX: 0,
                positionY: 0.9255999999999993,
                noteType: 0,
                key: "f",
                timing: 16006,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 7,
                type: 1,
                startTime: 14081,
                endTime: 14081,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: -1,
              },
              {
                trackId: 7,
                type: 1,
                startTime: 14788,
                endTime: 15003,
                endX: 0.35,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.2,
              },
              {
                trackId: 7,
                type: 1,
                startTime: 15003,
                endTime: 15146,
                endX: 0.5,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.34999999999999964,
              },
              {
                trackId: 7,
                type: 1,
                startTime: 15146,
                endTime: 15323,
                endX: 0.65,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.49895104895104936,
              },
              {
                trackId: 7,
                type: 1,
                startTime: 15323,
                endTime: 15491,
                endX: 0.8,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.6448796965746109,
              },
              {
                trackId: 7,
                type: 1,
                startTime: 15491,
                endTime: 15659,
                endX: 0.65,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.7963066594422532,
              },
              {
                trackId: 7,
                type: 1,
                startTime: 15659,
                endTime: 15834,
                endX: 0.5,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.6508708729728703,
              },
              {
                trackId: 7,
                type: 1,
                startTime: 15834,
                endTime: 16006,
                endX: 0.35,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5060348349189159,
              },
              {
                trackId: 7,
                type: 1,
                startTime: 16006,
                endTime: 16196,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.3518143585455693,
              },
            ],
            changeWidthOperations: [
              {
                trackId: 7,
                type: 2,
                startTime: 14618,
                endTime: 14788,
                endX: 0,
                endWidth: 0.05,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.1,
              },
            ],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.05,
            tempPositionX: 0.2,
          },
          {
            id: 8,
            type: 1,
            key: "f",
            startTiming: 14000,
            endTiming: 20366,
            positionX: -1,
            width: 0.1,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 8,
                positionX: 0,
                positionY: 0.9240000000000013,
                noteType: 0,
                key: "f",
                timing: 16386,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 8,
                positionX: 0,
                positionY: 0.9231999999999996,
                noteType: 0,
                key: "f",
                timing: 16534,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 8,
                positionX: 0,
                positionY: 0.9240000000000013,
                noteType: 0,
                key: "f",
                timing: 16708,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 8,
                positionX: 0,
                positionY: 0.9199999999999999,
                noteType: 0,
                key: "f",
                timing: 18464,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 8,
                positionX: 0,
                positionY: 0.9199999999999999,
                noteType: 0,
                key: "f",
                timing: 19340,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 8,
                positionX: 0,
                positionY: 0.9248000000000012,
                noteType: 0,
                key: "f",
                timing: 19691,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 8,
                positionX: 0,
                positionY: 0.9200000000000017,
                noteType: 0,
                key: "f",
                timing: 19866,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 8,
                type: 1,
                startTime: 14254,
                endTime: 14254,
                endX: 0.35,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: -1,
              },
              {
                trackId: 8,
                type: 1,
                startTime: 17491,
                endTime: 17576,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.35,
              },
              {
                trackId: 8,
                type: 1,
                startTime: 17931,
                endTime: 18292,
                endX: 0.3,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.2,
              },
              {
                trackId: 8,
                type: 1,
                startTime: 18292,
                endTime: 19691,
                endX: 0.4,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.2991689750692519,
              },
              {
                trackId: 8,
                type: 1,
                startTime: 20230,
                endTime: 20230,
                endX: -1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.4,
              },
            ],
            changeWidthOperations: [
              {
                trackId: 8,
                type: 2,
                startTime: 14618,
                endTime: 14788,
                endX: 0,
                endWidth: 0.07,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.1,
              },
              {
                trackId: 8,
                type: 2,
                startTime: 17491,
                endTime: 17576,
                endX: 0,
                endWidth: 0.05,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.07,
              },
              {
                trackId: 8,
                type: 2,
                startTime: 18292,
                endTime: 19691,
                endX: 0,
                endWidth: 0.1,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
            ],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.1,
            tempPositionX: -1,
          },
          {
            id: 9,
            type: 1,
            key: "j",
            startTiming: 14000,
            endTiming: 20717,
            positionX: -1,
            width: 0.1,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 9,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "j",
                timing: 16883,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 9,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "j",
                timing: 17054,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 9,
                positionX: 0,
                positionY: 0.9199999999999999,
                noteType: 0,
                key: "j",
                timing: 17406,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 9,
                positionX: 0,
                positionY: 0.9248000000000012,
                noteType: 0,
                key: "j",
                timing: 18642,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 9,
                positionX: 0,
                positionY: 0.9199999999999999,
                noteType: 0,
                key: "j",
                timing: 19105,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 9,
                positionX: 0,
                positionY: 0.9231999999999996,
                noteType: 0,
                key: "j",
                timing: 20042,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 9,
                positionX: 0,
                positionY: 0.9263999999999992,
                noteType: 0,
                key: "j",
                timing: 20217,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 9,
                type: 1,
                startTime: 14428,
                endTime: 14428,
                endX: 0.5,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: -1,
              },
              {
                trackId: 9,
                type: 1,
                startTime: 17491,
                endTime: 17576,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5,
              },
              {
                trackId: 9,
                type: 1,
                startTime: 17931,
                endTime: 18292,
                endX: 0.5,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.2,
              },
              {
                trackId: 9,
                type: 1,
                startTime: 18292,
                endTime: 19691,
                endX: 0.6,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.4975069252077553,
              },
              {
                trackId: 9,
                type: 1,
                startTime: 20230,
                endTime: 20230,
                endX: 2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.6,
              },
            ],
            changeWidthOperations: [
              {
                trackId: 9,
                type: 2,
                startTime: 14618,
                endTime: 14788,
                endX: 0,
                endWidth: 0.07,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.1,
              },
              {
                trackId: 9,
                type: 2,
                startTime: 17491,
                endTime: 17576,
                endX: 0,
                endWidth: 0.05,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.07,
              },
              {
                trackId: 9,
                type: 2,
                startTime: 18292,
                endTime: 19691,
                endX: 0,
                endWidth: 0.1,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
            ],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.1,
            tempPositionX: 2,
          },
          {
            id: 10,
            type: 1,
            key: "k",
            startTiming: 14000,
            endTiming: 26182,
            positionX: -1,
            width: 0.1,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 10,
                positionX: 0,
                positionY: 0.9231999999999996,
                noteType: 0,
                key: "k",
                timing: 17233,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 10,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 1,
                key: "k",
                timing: 18814,
                endTiming: 18890,
                length: 0.05527272727272728,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 10,
                positionX: 0,
                positionY: 0.9231999999999996,
                noteType: 0,
                key: "k",
                timing: 20042,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 10,
                positionX: 0,
                positionY: 0.9263999999999992,
                noteType: 0,
                key: "k",
                timing: 20217,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 10,
                positionX: 0,
                positionY: 0.9232000000000014,
                noteType: 0,
                key: "k",
                timing: 22149,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 10,
                positionX: 0,
                positionY: 0.926400000000001,
                noteType: 1,
                key: "k",
                timing: 22497,
                endTiming: 22671,
                length: 0.12654545454545454,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 10,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "k",
                timing: 25595,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 10,
                type: 1,
                startTime: 14618,
                endTime: 14618,
                endX: 0.65,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: -1,
              },
              {
                trackId: 10,
                type: 1,
                startTime: 17491,
                endTime: 17576,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.65,
              },
              {
                trackId: 10,
                type: 1,
                startTime: 17931,
                endTime: 18292,
                endX: 0.7,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.2,
              },
              {
                trackId: 10,
                type: 1,
                startTime: 18292,
                endTime: 19691,
                endX: 0.8,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.6958448753462605,
              },
            ],
            changeWidthOperations: [
              {
                trackId: 10,
                type: 2,
                startTime: 14618,
                endTime: 14788,
                endX: 0,
                endWidth: 0.07,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.1,
              },
              {
                trackId: 10,
                type: 2,
                startTime: 17491,
                endTime: 17576,
                endX: 0,
                endWidth: 0.05,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.07,
              },
              {
                trackId: 10,
                type: 2,
                startTime: 18292,
                endTime: 19691,
                endX: 0,
                endWidth: 0.1,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
              {
                trackId: 10,
                type: 2,
                startTime: 20217,
                endTime: 20568,
                endX: 0,
                endWidth: 0.07,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.1,
              },
              {
                trackId: 10,
                type: 2,
                startTime: 25328,
                endTime: 25685,
                endX: 0,
                endWidth: 0.05,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.07,
              },
            ],
            changeColorOperations: [
              {
                trackId: 10,
                type: 3,
                startTime: 25685,
                endTime: 25685,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 0,
                endB: 0,
                background: "",
                startR: 160,
                startG: 160,
                startB: 160,
              },
            ],
            tempR: 255,
            tempG: 0,
            tempB: 0,
            tempWidth: 0.05,
            tempPositionX: 0.8,
          },
          {
            id: 11,
            type: 1,
            key: "d",
            startTiming: 17192,
            endTiming: 40500,
            positionX: 0.2,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "d",
                timing: 18292,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9248000000000012,
                noteType: 0,
                key: "d",
                timing: 19691,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9200000000000017,
                noteType: 0,
                key: "d",
                timing: 19866,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9248000000000012,
                noteType: 0,
                key: "d",
                timing: 21978,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.921599999999998,
                noteType: 0,
                key: "d",
                timing: 22323,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9224000000000032,
                noteType: 0,
                key: "d",
                timing: 22845,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9200000000000017,
                noteType: 0,
                key: "d",
                timing: 23569,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "d",
                timing: 25328,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9216000000000015,
                noteType: 0,
                key: "d",
                timing: 25685,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "d",
                timing: 28460,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 1,
                key: "d",
                timing: 30040,
                endTiming: 30217,
                length: 0.12872727272727275,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "d",
                timing: 31270,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "d",
                timing: 31445,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9255999999999993,
                noteType: 0,
                key: "d",
                timing: 32500,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9255999999999993,
                noteType: 0,
                key: "d",
                timing: 32670,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9199999999999982,
                noteType: 0,
                key: "d",
                timing: 32849,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.921599999999998,
                noteType: 1,
                key: "d",
                timing: 33724,
                endTiming: 33902,
                length: 0.12945454545454546,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9199999999999982,
                noteType: 0,
                key: "d",
                timing: 34244,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9255999999999993,
                noteType: 0,
                key: "d",
                timing: 34338,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 1,
                key: "d",
                timing: 34606,
                endTiming: 34859,
                length: 0.18400000000000002,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "d",
                timing: 36201,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "d",
                timing: 36350,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "d",
                timing: 36881,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 11,
                positionX: 0,
                positionY: 0.9271999999999991,
                noteType: 1,
                key: "d",
                timing: 37236,
                endTiming: 40000,
                length: 2.010181818181818,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 11,
                type: 1,
                startTime: 25685,
                endTime: 26005,
                endX: 0.35,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.2,
              },
              {
                trackId: 11,
                type: 1,
                startTime: 28720,
                endTime: 28806,
                endX: 0.8,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.35,
              },
              {
                trackId: 11,
                type: 1,
                startTime: 29164,
                endTime: 29511,
                endX: 0.3,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8,
              },
              {
                trackId: 11,
                type: 1,
                startTime: 29511,
                endTime: 30918,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.3057636887608055,
              },
              {
                trackId: 11,
                type: 1,
                startTime: 37236,
                endTime: 38000,
                endX: 0.5,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.2,
              },
            ],
            changeWidthOperations: [
              {
                trackId: 11,
                type: 2,
                startTime: 18292,
                endTime: 19691,
                endX: 0,
                endWidth: 0.1,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
              {
                trackId: 11,
                type: 2,
                startTime: 20217,
                endTime: 20568,
                endX: 0,
                endWidth: 0.07,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.1,
              },
              {
                trackId: 11,
                type: 2,
                startTime: 25328,
                endTime: 25685,
                endX: 0,
                endWidth: 0.05,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.07,
              },
              {
                trackId: 11,
                type: 2,
                startTime: 28720,
                endTime: 28806,
                endX: 0,
                endWidth: 0.05,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
              {
                trackId: 11,
                type: 2,
                startTime: 29511,
                endTime: 30918,
                endX: 0,
                endWidth: 0.1,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
              {
                trackId: 11,
                type: 2,
                startTime: 37236,
                endTime: 38000,
                endX: 0,
                endWidth: 0.3,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.1,
              },
            ],
            changeColorOperations: [
              {
                trackId: 11,
                type: 3,
                startTime: 23569,
                endTime: 23569,
                endX: 0,
                endWidth: 0,
                endR: 0,
                endG: 0,
                endB: 255,
                background: "",
                startR: 160,
                startG: 160,
                startB: 160,
              },
              {
                trackId: 11,
                type: 3,
                startTime: 25685,
                endTime: 25685,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 0,
                endB: 0,
                background: "",
                startR: 0,
                startG: 0,
                startB: 255,
              },
              {
                trackId: 11,
                type: 3,
                startTime: 26005,
                endTime: 26005,
                endX: 0,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startR: 255,
                startG: 0,
                startB: 0,
              },
              {
                trackId: 11,
                type: 3,
                startTime: 34606,
                endTime: 34606,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 0,
                endB: 0,
                background: "",
                startR: 160,
                startG: 160,
                startB: 160,
              },
            ],
            tempR: 255,
            tempG: 0,
            tempB: 0,
            tempWidth: 0.3,
            tempPositionX: 0.5,
          },
          {
            id: 12,
            type: 0,
            key: "a",
            startTiming: 19468,
            endTiming: 21244,
            positionX: 0.5,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 12,
                positionX: 0,
                positionY: 0.9215999999999998,
                noteType: 0,
                key: "d",
                timing: 20568,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 12,
                type: 1,
                startTime: 19892,
                endTime: 20568,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5,
              },
              {
                trackId: 12,
                type: 1,
                startTime: 20568,
                endTime: 21244,
                endX: -0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.2008875739644953,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.05,
            tempPositionX: -0.1,
          },
          {
            id: 13,
            type: 0,
            key: "a",
            startTiming: 19645,
            endTiming: 21421,
            positionX: 0.5,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 13,
                positionX: 0,
                positionY: 0.9223999999999979,
                noteType: 0,
                key: "k",
                timing: 20745,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 13,
                type: 1,
                startTime: 20069,
                endTime: 20745,
                endX: 0.8,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5,
              },
              {
                trackId: 13,
                type: 1,
                startTime: 20745,
                endTime: 21421,
                endX: 1.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.7964497041420131,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.05,
            tempPositionX: 1.1,
          },
          {
            id: 14,
            type: 0,
            key: "a",
            startTiming: 19815,
            endTiming: 21591,
            positionX: 0.5,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 14,
                positionX: 0,
                positionY: 0.9224000000000014,
                noteType: 0,
                key: "d",
                timing: 20915,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 14,
                type: 1,
                startTime: 20239,
                endTime: 20915,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5,
              },
              {
                trackId: 14,
                type: 1,
                startTime: 20915,
                endTime: 21591,
                endX: -0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.1999999999999993,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.05,
            tempPositionX: -0.1,
          },
          {
            id: 15,
            type: 0,
            key: "a",
            startTiming: 20169,
            endTiming: 21946,
            positionX: 0.5,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 15,
                positionX: 0,
                positionY: 0.9248000000000012,
                noteType: 0,
                key: "k",
                timing: 21269,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 15,
                type: 1,
                startTime: 20592,
                endTime: 21269,
                endX: 0.8,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5,
              },
              {
                trackId: 15,
                type: 1,
                startTime: 21269,
                endTime: 21946,
                endX: 1.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.7973412112259979,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.05,
            tempPositionX: 1.1,
          },
          {
            id: 16,
            type: 0,
            key: "a",
            startTiming: 20348,
            endTiming: 22135,
            positionX: 0.5,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 16,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "d",
                timing: 21448,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 16,
                type: 1,
                startTime: 20761,
                endTime: 21448,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5,
              },
              {
                trackId: 16,
                type: 1,
                startTime: 21448,
                endTime: 22135,
                endX: -0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.20262008733624448,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.05,
            tempPositionX: -0.1,
          },
          {
            id: 17,
            type: 0,
            key: "a",
            startTiming: 20521,
            endTiming: 22308,
            positionX: 0.5,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 17,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "k",
                timing: 21621,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 17,
                type: 1,
                startTime: 20934,
                endTime: 21621,
                endX: 0.8,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5,
              },
              {
                trackId: 17,
                type: 1,
                startTime: 21621,
                endTime: 22308,
                endX: 1.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.79825327510917,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.05,
            tempPositionX: 1.1,
          },
          {
            id: 18,
            type: 1,
            key: "f",
            startTiming: 22804,
            endTiming: 31945,
            positionX: 0.4,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 18,
                positionX: 0,
                positionY: 0.9255999999999993,
                noteType: 0,
                key: "f",
                timing: 23904,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 18,
                positionX: 0,
                positionY: 0.9248000000000012,
                noteType: 0,
                key: "f",
                timing: 25506,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 18,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "f",
                timing: 28106,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 18,
                positionX: 0,
                positionY: 0.9248000000000012,
                noteType: 0,
                key: "f",
                timing: 28292,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 18,
                positionX: 0,
                positionY: 0.9255999999999993,
                noteType: 0,
                key: "f",
                timing: 28633,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 18,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "f",
                timing: 29865,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 18,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "f",
                timing: 30395,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 18,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "f",
                timing: 31270,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 18,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "f",
                timing: 31445,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 18,
                type: 1,
                startTime: 25685,
                endTime: 26005,
                endX: 0.5,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.4,
              },
              {
                trackId: 18,
                type: 1,
                startTime: 28720,
                endTime: 28806,
                endX: 0.8,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5,
              },
              {
                trackId: 18,
                type: 1,
                startTime: 29164,
                endTime: 29511,
                endX: 0.5,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8,
              },
              {
                trackId: 18,
                type: 1,
                startTime: 29511,
                endTime: 30918,
                endX: 0.4,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5034582132564829,
              },
              {
                trackId: 18,
                type: 1,
                startTime: 31445,
                endTime: 31445,
                endX: -0.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.4,
              },
            ],
            changeWidthOperations: [
              {
                trackId: 18,
                type: 2,
                startTime: 28720,
                endTime: 28806,
                endX: 0,
                endWidth: 0.05,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
              {
                trackId: 18,
                type: 2,
                startTime: 29511,
                endTime: 30918,
                endX: 0,
                endWidth: 0.1,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
            ],
            changeColorOperations: [
              {
                trackId: 18,
                type: 3,
                startTime: 23904,
                endTime: 23904,
                endX: 0,
                endWidth: 0,
                endR: 0,
                endG: 0,
                endB: 255,
                background: "",
                startR: 160,
                startG: 160,
                startB: 160,
              },
              {
                trackId: 18,
                type: 3,
                startTime: 25685,
                endTime: 25685,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 0,
                endB: 0,
                background: "",
                startR: 0,
                startG: 0,
                startB: 255,
              },
              {
                trackId: 18,
                type: 3,
                startTime: 26005,
                endTime: 26005,
                endX: 0,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startR: 255,
                startG: 0,
                startB: 0,
              },
            ],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.1,
            tempPositionX: -0.1,
          },
          {
            id: 19,
            type: 1,
            key: "j",
            startTiming: 23199,
            endTiming: 31587,
            positionX: 0.6,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9248000000000012,
                noteType: 0,
                key: "j",
                timing: 24432,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "j",
                timing: 24782,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "j",
                timing: 25134,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "j",
                timing: 25417,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9232000000000014,
                noteType: 0,
                key: "j",
                timing: 27585,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9248000000000012,
                noteType: 0,
                key: "j",
                timing: 27766,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9199999999999982,
                noteType: 0,
                key: "j",
                timing: 27931,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "j",
                timing: 29694,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9232000000000014,
                noteType: 0,
                key: "j",
                timing: 30571,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "j",
                timing: 30918,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 19,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "j",
                timing: 31087,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 19,
                type: 1,
                startTime: 25685,
                endTime: 26005,
                endX: 0.65,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.6,
              },
              {
                trackId: 19,
                type: 1,
                startTime: 28720,
                endTime: 28806,
                endX: 0.8,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.65,
              },
              {
                trackId: 19,
                type: 1,
                startTime: 29164,
                endTime: 29511,
                endX: 0.7,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8,
              },
              {
                trackId: 19,
                type: 1,
                startTime: 29511,
                endTime: 30918,
                endX: 0.6,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.7011527377521611,
              },
              {
                trackId: 19,
                type: 1,
                startTime: 31445,
                endTime: 31445,
                endX: 1.1,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.6,
              },
            ],
            changeWidthOperations: [
              {
                trackId: 19,
                type: 2,
                startTime: 28720,
                endTime: 28806,
                endX: 0,
                endWidth: 0.05,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
              {
                trackId: 19,
                type: 2,
                startTime: 29511,
                endTime: 30918,
                endX: 0,
                endWidth: 0.1,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
            ],
            changeColorOperations: [
              {
                trackId: 19,
                type: 3,
                startTime: 24432,
                endTime: 24432,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 0,
                endB: 0,
                background: "",
                startR: 160,
                startG: 160,
                startB: 160,
              },
              {
                trackId: 19,
                type: 3,
                startTime: 24782,
                endTime: 24782,
                endX: 0,
                endWidth: 0,
                endR: 0,
                endG: 255,
                endB: 0,
                background: "",
                startR: 255,
                startG: 0,
                startB: 0,
              },
              {
                trackId: 19,
                type: 3,
                startTime: 25134,
                endTime: 25134,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 255,
                endB: 255,
                background: "",
                startR: 0,
                startG: 255,
                startB: 0,
              },
              {
                trackId: 19,
                type: 3,
                startTime: 25328,
                endTime: 25328,
                endX: 0,
                endWidth: 0,
                endR: 0,
                endG: 0,
                endB: 255,
                background: "",
                startR: 255,
                startG: 255,
                startB: 255,
              },
              {
                trackId: 19,
                type: 3,
                startTime: 25685,
                endTime: 25685,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 0,
                endB: 0,
                background: "",
                startR: 0,
                startG: 0,
                startB: 255,
              },
              {
                trackId: 19,
                type: 3,
                startTime: 26005,
                endTime: 26005,
                endX: 0,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startR: 255,
                startG: 0,
                startB: 0,
              },
            ],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.1,
            tempPositionX: 1.1,
          },
          {
            id: 20,
            type: 0,
            key: "a",
            startTiming: 25082,
            endTiming: 27735,
            positionX: 0.8,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 20,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "j",
                timing: 26182,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 20,
                positionX: 0,
                positionY: 0.9199999999999982,
                noteType: 0,
                key: "f",
                timing: 26355,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 20,
                positionX: 0,
                positionY: 0.9231999999999978,
                noteType: 0,
                key: "d",
                timing: 26534,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 20,
                positionX: 0,
                positionY: 0.9232000000000014,
                noteType: 0,
                key: "d",
                timing: 26884,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 20,
                positionX: 0,
                positionY: 0.9247999999999976,
                noteType: 0,
                key: "f",
                timing: 27058,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 20,
                positionX: 0,
                positionY: 0.9232000000000014,
                noteType: 0,
                key: "j",
                timing: 27235,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [
              {
                trackId: 20,
                type: 1,
                startTime: 26005,
                endTime: 26182,
                endX: 0.65,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.8,
              },
              {
                trackId: 20,
                type: 1,
                startTime: 26182,
                endTime: 26355,
                endX: 0.5,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.6525423728813529,
              },
              {
                trackId: 20,
                type: 1,
                startTime: 26355,
                endTime: 26534,
                endX: 0.35,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.5035269912804949,
              },
              {
                trackId: 20,
                type: 1,
                startTime: 26534,
                endTime: 26709,
                endX: 0.2,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.3534307707548727,
              },
              {
                trackId: 20,
                type: 1,
                startTime: 26709,
                endTime: 26884,
                endX: 0.35,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.20350698904582387,
              },
              {
                trackId: 20,
                type: 1,
                startTime: 26884,
                endTime: 27058,
                endX: 0.5,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.34665158832104837,
              },
              {
                trackId: 20,
                type: 1,
                startTime: 27058,
                endTime: 27235,
                endX: 0.65,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.4973560618676025,
              },
              {
                trackId: 20,
                type: 1,
                startTime: 27235,
                endTime: 27416,
                endX: 0.8,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startX: 0.6456880243465406,
              },
            ],
            changeWidthOperations: [],
            changeColorOperations: [],
            tempR: 160,
            tempG: 160,
            tempB: 160,
            tempWidth: 0.05,
            tempPositionX: 0.8,
          },
          {
            id: 21,
            type: 1,
            key: "k",
            startTiming: 28411,
            endTiming: 37569,
            positionX: 0.8,
            width: 0.05,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "k",
                timing: 29511,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "k",
                timing: 30918,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "k",
                timing: 31087,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9239999999999995,
                noteType: 0,
                key: "k",
                timing: 31804,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9200000000000017,
                noteType: 0,
                key: "k",
                timing: 31968,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "k",
                timing: 32151,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9200000000000017,
                noteType: 0,
                key: "k",
                timing: 33210,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9256000000000029,
                noteType: 0,
                key: "k",
                timing: 33380,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9256000000000029,
                noteType: 0,
                key: "k",
                timing: 33561,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9247999999999976,
                noteType: 0,
                key: "d",
                timing: 34080,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "k",
                timing: 34433,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9200000000000017,
                noteType: 1,
                key: "k",
                timing: 35112,
                endTiming: 35362,
                length: 0.18181818181818182,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9207999999999998,
                noteType: 0,
                key: "k",
                timing: 36012,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9223999999999997,
                noteType: 0,
                key: "k",
                timing: 36535,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9231999999999978,
                noteType: 0,
                key: "k",
                timing: 36702,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
              {
                basedTrack: 21,
                positionX: 0,
                positionY: 0.9216000000000015,
                noteType: 0,
                key: "k",
                timing: 37069,
                endTiming: 0,
                length: 0,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [],
            changeWidthOperations: [
              {
                trackId: 21,
                type: 2,
                startTime: 29511,
                endTime: 30918,
                endX: 0,
                endWidth: 0.1,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
                startWidth: 0.05,
              },
            ],
            changeColorOperations: [
              {
                trackId: 21,
                type: 3,
                startTime: 26005,
                endTime: 26005,
                endX: 0,
                endWidth: 0,
                endR: 160,
                endG: 160,
                endB: 160,
                background: "",
              },
              {
                trackId: 21,
                type: 3,
                startTime: 35112,
                endTime: 35112,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 0,
                endB: 0,
                background: "",
                startR: 160,
                startG: 160,
                startB: 160,
              },
            ],
            tempR: 255,
            tempG: 0,
            tempB: 0,
            tempWidth: 0.1,
            tempPositionX: 0.8,
          },
          {
            id: 22,
            type: 1,
            key: "f",
            startTiming: 34013,
            endTiming: 37236,
            positionX: 0.5,
            width: 0.1,
            R: 160,
            G: 160,
            B: 160,
            notes: [
              {
                basedTrack: 22,
                positionX: 0,
                positionY: 0.926400000000001,
                noteType: 1,
                key: "f",
                timing: 35613,
                endTiming: 35812,
                length: 0.14472727272727273,
                lastTime: 0,
                currentTime: 0,
              },
            ],
            moveOperations: [],
            changeWidthOperations: [],
            changeColorOperations: [
              {
                trackId: 22,
                type: 3,
                startTime: 35613,
                endTime: 35613,
                endX: 0,
                endWidth: 0,
                endR: 255,
                endG: 0,
                endB: 0,
                background: "",
                startR: 160,
                startG: 160,
                startB: 160,
              },
            ],
            tempR: 255,
            tempG: 0,
            tempB: 0,
            tempWidth: 0.1,
            tempPositionX: 0.5,
          },
        ],
        songLength: 42500,
        defaultBackground: "http://pic.mcatk.com/charlot-pictures/0.jpg",
        songUrl: "http://10.251.0.251:8000/media/1.mp3",
        changeBackgroundOperations: [
          {
            startTime: 17576,
            background: "http://pic.mcatk.com/charlot-pictures/black.jpg",
          },
          {
            startTime: 17931,
            background: "http://pic.mcatk.com/charlot-pictures/0.jpg",
          },
          {
            startTime: 23569,
            background: "http://pic.mcatk.com/charlot-pictures/1.jpg",
          },
          {
            startTime: 23904,
            background: "http://pic.mcatk.com/charlot-pictures/2.jpg",
          },
          {
            startTime: 24432,
            background: "http://pic.mcatk.com/charlot-pictures/3.jpg",
          },
          {
            startTime: 24782,
            background: "http://pic.mcatk.com/charlot-pictures/4.jpg",
          },
          {
            startTime: 25134,
            background: "http://pic.mcatk.com/charlot-pictures/5.jpg",
          },
          {
            startTime: 25328,
            background: "http://pic.mcatk.com/charlot-pictures/6.jpg",
          },
          {
            startTime: 25685,
            background: "http://pic.mcatk.com/charlot-pictures/7.jpg",
          },
          {
            startTime: 26005,
            background: "http://pic.mcatk.com/charlot-pictures/0.jpg",
          },
          {
            startTime: 28806,
            background: "http://pic.mcatk.com/charlot-pictures/black.jpg",
          },
          {
            startTime: 29164,
            background: "http://pic.mcatk.com/charlot-pictures/0.jpg",
          },
          {
            startTime: 34606,
            background: "http://pic.mcatk.com/charlot-pictures/8.jpg",
          },
          {
            startTime: 35112,
            background: "http://pic.mcatk.com/charlot-pictures/9.jpg",
          },
          {
            startTime: 35613,
            background: "http://pic.mcatk.com/charlot-pictures/10.jpg",
          },
          {
            startTime: 36012,
            background: "http://pic.mcatk.com/charlot-pictures/0.jpg",
          },
        ],
        uploader: "charlot",
        songWriter: "椎名林檎",
        songCover: "http://pic.mcatk.com/charlot-pictures/0.jpg",
        loadingText: "加载中……",
        notesCount: 164,
      };
    },

    //给轨道排序
    sortTrack() {
      this.chart.tracks.sort(function(a, b) {
        return b.startTiming - a.startTiming;
      });
    },

    //运行
    run() {
      this.global.currentTime = Math.floor(this.audio.currentTime * 1000);
      this.isRunning = true;
      if (this.global.currentTime < this.chart.songLength) {
        setTimeout(() => {
          this.run();
        }, 1000 / this.$store.state.refreshRate);
      } else {
        this.global.currentTime = this.chart.songLength;
        this.isRunning = false;
      }
    },

    //audio加载完毕
    audioLoaded() {
      this.audio = document.getElementById("audioSong");
      this.loadingStatus.audio = true;
      console.log("audio loaded");
      this.checkIfLoaded();
    },

    //图片加载完毕
    imageLoaded() {
      this.loadingStatus.imageCurrentCount++;
      if (this.loadingStatus.imageCurrentCount == this.imagePath.length) {
        this.loadingStatus.image = true;
        console.log("image loaded");
        this.checkIfLoaded();
      }
    },

    //打印控制台信息
    log(message) {
      console.log(message);
    },

    //加载
    initiate() {
      this.getChart();
      this.loadingStatus.chart = true;
      this.sortTrack();
      this.generateImagePath();
    },

    //开始播放音乐
    startMusic() {
      this.dialogVisible = false;
      this.audio.play();
      this.run();
    },

    //生成图片路径
    generateImagePath() {
      this.imagePath = [];
      let length = this.chart.changeBackgroundOperations.length;
      let start = 0;
      let end = start;
      let defaultBackground = this.chart.defaultBackground;
      if (length == 0) {
        end = this.chart.songLength;
      } else {
        this.chart.changeBackgroundOperations.sort(function(a, b) {
          return a.startTime - b.startTime;
        });
        end = this.chart.changeBackgroundOperations[0].startTime;
      }
      this.imagePath.push({
        url: defaultBackground,
        startTime: 0,
        endTime: end,
      });
      for (let i = 0; i < length; i++) {
        let operation = this.chart.changeBackgroundOperations[i];
        start = operation.startTime;
        if (i != length - 1) {
          let nextOperation = this.chart.changeBackgroundOperations[i + 1];
          this.imagePath.push({
            url: operation.background,
            startTime: start,
            endTime: nextOperation.startTime,
          });
        } else {
          this.imagePath.push({
            url: defaultBackground,
            startTime: start,
            endTime: this.chart.songLength + 1000,
          });
        }
      }
    },

    //变换slide的时间
    changeTime() {
      this.audio.currentTime = this.global.currentTime / 1000;
      this.audio.play();
      if (!this.isRunning) {
        this.run();
      }
    },

    //父组件提供的方法
    addCount(param) {
      this.global[param.key] += 1;
      console.log(param.message+", 点击时机:"+param.judgeTime+", 音符时机:"+param.timing);
      if(param.key=="lost"){
        this.global.combo=0
        this.global.maxCombo = Math.max(this.global.maxCombo,this.global.combo); 
      }
      else{
        this.global.combo++;
      }
    },

    //当所有都加载完毕的时候开始运行
    checkIfLoaded() {
      if (
        this.loadingStatus.chart &&
        this.loadingStatus.audio &&
        this.loadingStatus.image
      ) {
        this.loadingStatus.canRun = true;
        this.dialogVisible = true;
      }
    },
  },
};
</script>

<style scoped>
.play-interface {
  height: 100%;
  width: 100%;
  background: white;
}
.select {
  -webkit-user-select: none;

  -moz-user-select: none;

  -ms-user-select: none;

  user-select: none;
}
</style>
